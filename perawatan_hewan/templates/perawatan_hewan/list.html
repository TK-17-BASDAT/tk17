{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="flex min-h-screen">
  <!-- Sidebar -->
  <aside class="w-64 bg-white border-r">
    {% include 'navbar/sidebar.html' %}
  </aside>

  <!-- Main content -->
  <main class="flex-1 bg-gray-50 font-poppins p-8">
    <!-- Header + tombol -->
    <div class="flex items-center justify-between mb-8">
      <h1 class="text-3xl font-semibold text-primary">Daftar Perawatan</h1>
      <form action="{% url 'perawatan_hewan:create' %}" method="get" class="inline">
        <button
          type="submit"
          class="px-4 py-2 bg-primary text-white rounded hover:bg-primary/80 transition"
        >
          + Buat Perawatan Baru
        </button>
      </form>
    </div>

    <!-- Tabel Perawatan -->
    <div class="bg-white rounded-lg shadow overflow-x-auto">
      <table class="min-w-full border-separate border-spacing-0">
        <thead class="bg-secondary">
          <tr>
            <th class="px-6 py-4 text-left text-white">No</th>
            <th class="px-6 py-4 text-left text-white">ID Kunjungan</th>
            <th class="px-6 py-4 text-left text-white">ID Klien</th>
            <th class="px-6 py-4 text-left text-white">Nama Hewan</th>
            <th class="px-6 py-4 text-left text-white">Perawat Hewan</th>
            <th class="px-6 py-4 text-left text-white">Dokter Hewan</th>
            <th class="px-6 py-4 text-left text-white">Front Desk Officer</th>
            <th class="px-6 py-4 text-left text-white">Jenis Perawatan</th>
            <th class="px-6 py-4 text-left text-white">Catatan Medis</th>
            <th class="px-6 py-4 text-left text-white">Action</th>
          </tr>
        </thead>
        <tbody class="divide-y">
          <!-- DUMMY RECORD #1 -->
          <tr class="hover:bg-gray-50">
            <td class="px-6 py-5">1</td>
            <td class="px-6 py-5">KJN001</td>
            <td class="px-6 py-5">FDO123</td>
            <td class="px-6 py-5">Snowy</td>
            <td class="px-6 py-5">Joko</td>
            <td class="px-6 py-5">Dr. Rizki</td>
            <td class="px-6 py-5">Tina</td>
            <td class="px-6 py-5">TRM001 â€“ Dental Care</td>
            <td class="px-6 py-5">Semua gigi sudah dibersihkan.</td>
            <td class="px-6 py-5 space-x-3 whitespace-nowrap">
              <form action="{% url 'perawatan_hewan:update' %}" method="get" class="inline">
                <button
                  type="submit"
                  class="px-4 py-2 bg-secondary text-white rounded hover:bg-secondary/80 transition"
                >
                  Update
                </button>
              </form>
              <button id="delete-btn"
                      class="px-4 py-2 bg-primary text-white rounded hover:bg-primary/80 transition">
                Hapus
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </main>

</div><!-- Modal Delete -->
<div id="delete-modal"
     class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50">
  <div class="bg-white rounded-lg shadow-lg max-w-md w-full mx-4">
    <div class="px-6 py-4 border-b flex justify-between items-center">
      <h2 class="text-xl font-semibold text-red-600">Delete Treatment</h2>
      <button id="close-delete" class="text-2xl leading-none">&times;</button>
    </div>
    <div class="p-6">
      <p>
        Apakah kamu yakin untuk menghapus Perawatan untuk Kunjungan
        <strong>KJN001</strong> dengan Perawatan <strong>TRM001</strong>?
      </p>
    </div>
    <div class="px-6 py-4 border-t flex justify-end space-x-4">
      <button id="cancel-delete"
              class="px-6 py-2 bg-secondary text-primary rounded hover:bg-secondary/80 transition">
        Cancel
      </button>
      <button id="confirm-delete"
              class="px-6 py-2 bg-red-600 text-white rounded hover:bg-red-500 transition">
        Confirm Deletion
      </button>
    </div>
  </div>
</div>

<script>
const deleteBtn = document.getElementById('delete-btn');
const modal    = document.getElementById('delete-modal');
const closeX   = document.getElementById('close-delete');
const cancel   = document.getElementById('cancel-delete');
const confirm  = document.getElementById('confirm-delete');

deleteBtn.addEventListener('click', () => {
  modal.classList.remove('hidden');
});

[closeX, cancel].forEach(el =>
  el.addEventListener('click', () => modal.classList.add('hidden'))
);

confirm.addEventListener('click', () => {
  alert('Deleted! (TODO: panggil backend)');
  modal.classList.add('hidden');
});
</script>


{% endblock %}
