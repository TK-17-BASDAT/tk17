{% extends "base.html" %}

{% block content %}
<div class="flex">
  {% include "navbar/sidebar_dokter.html" %}
  <main class="bg-gray-50 flex-1 ml-64 p-6">
    <div class="bg-gray-50 min-h-screen flex items-center justify-center p-6 font-[Poppins]">

      <div class="w-full max-w-4xl bg-white rounded-xl shadow-md p-8">
        <!-- Header -->
        <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4">
          <div>
            <h1 class="text-2xl font-semibold text-gray-800">Profile Dokter</h1>
          </div>
          <div class="flex gap-3">
            <button class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg text-sm font-medium">Update Password</button>
            <button onclick="toggleEditMode()" class="bg-teal-800 hover:bg-teal-900 text-white px-4 py-2 rounded-lg text-sm font-medium">Update Profile</button>
          </div>
        </div>
    
        <!-- View Mode -->
        <div id="view-mode">
          <div class="space-y-6">
            <div class="flex justify-between">
                <span class="font-medium text-gray-700">Nomor Identitas</span>
                <span class="text-gray-900">{{ user_data.no_pegawai }}</span>
            </div>
            <div class="flex justify-between">
                <span class="font-medium text-gray-700">Nomor Izin Praktik</span>
                <span class="text-gray-900">{{ user_data.no_izin_praktik }}</span>
            </div>
            <div class="flex justify-between">
                <span class="font-medium text-gray-700">Email</span>
                <span class="text-gray-900">{{ user_data.email }}</span>
            </div>
            <div class="flex justify-between">
                <span class="font-medium text-gray-700">Tanggal Diterima</span>
                <span class="text-gray-900">{{ user_data.tanggal_mulai_kerja }}</span>
            </div>
          <div class="flex justify-between">
            <span class="font-medium text-gray-700">Tanggal Akhir Kerja</span>
            <span class="text-gray-900">
              {% if user_data.tanggal_akhir_kerja %}
                {{ user_data.tanggal_akhir_kerja|date:"d F Y" }}
              {% else %}
                -
              {% endif %}
            </span>
          </div>

            <div class="flex justify-between">
                <span class="font-medium text-gray-700">Alamat</span>
                <span class="text-gray-900">{{ user_data.alamat }}</span>
            </div>
            <div class="flex justify-between">
                <span class="font-medium text-gray-700">Nomor Telepon</span>
                <span class="text-gray-900">{{ user_data.nomor_telepon }}</span>
            </div>
          </div>
    
          <!-- Sertifikat (View Mode) -->
          <div class="mt-8">
            <h2 class="text-xl font-semibold text-gray-900 mb-4">Daftar Sertifikat</h2>
            {% if user_data.sertifikat_kompetensi %}
            <table class="w-full table-auto border-collapse">
                <thead>
                    <tr class="text-left bg-gray-100">
                        <th class="px-4 py-2 border-b text-sm font-medium text-gray-700">No</th>
                        <th class="px-4 py-2 border-b text-sm font-medium text-gray-700">Nomor Sertifikat</th>
                        <th class="px-4 py-2 border-b text-sm font-medium text-gray-700">Nama Sertifikat</th>
                    </tr>
                </thead>
                <tbody>
                    {% for sertifikat in user_data.sertifikat_kompetensi %} {# <-- LOOPING DATA SERTIFIKAT #}
                    <tr class="border-b">
                        <td class="px-4 py-2 text-sm text-gray-700">{{ forloop.counter }}</td>
                        <td class="px-4 py-2 text-sm text-gray-700">{{ sertifikat.no }}</td>
                        <td class="px-4 py-2 text-sm text-gray-700">{{ sertifikat.nama }}</td>
                    </tr>
                    {% empty %} {# <-- APA YANG DITAMPILKAN JIKA LIST KOSONG #}
                    <tr>
                        <td colspan="3" class="px-4 py-2 text-sm text-gray-600 text-center">Tidak ada data sertifikat.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %} {# <-- JIKA KUNCI 'sertifikat_kompetensi' TIDAK ADA ATAU None #}
            <p class="text-gray-600">Tidak ada data sertifikat.</p>
            {% endif %}
          </div>
    
          <!-- Jadwal Praktik (View Mode) -->
          <div class="mt-8">
            <h2 class="text-xl font-semibold text-gray-900 mb-4">Daftar Jadwal Praktik</h2>
            {% if user_data.jadwal_praktik %}
            <table class="w-full table-auto border-collapse">
                <thead>
                    <tr class="text-left bg-gray-100">
                        <th class="px-4 py-2 border-b text-sm font-medium text-gray-700">No</th>
                        <th class="px-4 py-2 border-b text-sm font-medium text-gray-700">Hari</th>
                        <th class="px-4 py-2 border-b text-sm font-medium text-gray-700">Jam</th>
                    </tr>
                </thead>
                <tbody>
                    {% for jadwal in user_data.jadwal_praktik %} {# <-- LOOPING DATA JADWAL #}
                    <tr class="border-b">
                        <td class="px-4 py-2 text-sm text-gray-700">{{ forloop.counter }}</td>
                        <td class="px-4 py-2 text-sm text-gray-700">{{ jadwal.hari }}</td>
                        <td class="px-4 py-2 text-sm text-gray-700">{{ jadwal.jam }}</td>
                    </tr>
                    {% empty %} {# <-- APA YANG DITAMPILKAN JIKA LIST KOSONG #}
                    <tr>
                        <td colspan="3" class="px-4 py-2 text-sm text-gray-600 text-center">Tidak ada data jadwal praktik.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %} {# <-- JIKA KUNCI 'jadwal_praktik' TIDAK ADA ATAU None #}
            <p class="text-gray-600">Tidak ada data jadwal praktik.</p>
            {% endif %}
          </div>
        </div>
    
        </div>
    
        <!-- Edit Mode -->
        <form id="edit-mode" class="hidden mt-4" onsubmit="event.preventDefault(); saveChanges();">
          <div class="space-y-6">
            <div class="flex justify-between">
              <label class="font-medium text-gray-700">Nomor Identitas</label>
              <input type="text" value="c4fd2f14-0202-4526-b1f4-5fcde0c28783" class="text-gray-900 bg-gray-100 border px-3 py-2 rounded-lg" disabled>
            </div>
            <div class="flex justify-between">
              <label class="font-medium text-gray-700">Nomor Izin Praktik</label>
              <input type="text" value="SIP-HEWAN-12345" class="text-gray-900 bg-gray-100 border px-3 py-2 rounded-lg" disabled>
            </div>
            <div class="flex justify-between">
              <label class="font-medium text-gray-700">Email</label>
              <input type="email" value="bobby.muhammad@petclinic.com" class="text-gray-900 bg-gray-100 border px-3 py-2 rounded-lg">
            </div>
            <div class="flex justify-between">
              <label class="font-medium text-gray-700">Tanggal Diterima</label>
              <input type="date" value="2025-01-23" class="text-gray-900 bg-gray-100 border px-3 py-2 rounded-lg" disabled>
            </div>
            <div class="flex justify-between">
              <label class="font-medium text-gray-700">Tanggal Akhir Kerja</label>
              <input type="date" value="" class="text-gray-900 bg-gray-100 border px-3 py-2 rounded-lg">
            </div>
            <div class="flex justify-between">
              <label class="font-medium text-gray-700">Alamat</label>
              <input type="text" value="Jl. Melati Indah No. 23, Kel. Sukamaju, Kec. Cibinong, Kab. Bogor, Jawa Barat, 16914" class="text-gray-900 bg-gray-100 border px-3 py-2 rounded-lg">
            </div>
            <div class="flex justify-between">
              <label class="font-medium text-gray-700">Nomor Telepon</label>
              <input type="text" value="081234567893" class="text-gray-900 bg-gray-100 border px-3 py-2 rounded-lg">
            </div>
          </div>
    
          <!-- Sertifikat -->
          <div class="mt-4">
            <h2 class="text-xl font-semibold text-gray-900 mb-4">Daftar Sertifikat</h2>
            <table class="w-full table-auto border-collapse">
                <thead>
                    <tr class="text-left bg-gray-100">
                        <th class="px-4 py-2 border-b text-sm font-medium text-gray-700">No</th>
                        <th class="px-4 py-2 border-b text-sm font-medium text-gray-700">Nomor Sertifikat</th>
                        <th class="px-4 py-2 border-b text-sm font-medium text-gray-700">Nama Sertifikat</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="border-b">
                        <td class="px-4 py-2 text-sm text-gray-700">1</td>
                        <td class="px-4 py-2 text-sm text-gray-700"><input type="text" value="123/DH/456" class="text-gray-900 bg-gray-100 border px-3 py-2 rounded-lg"></td>
                        <td class="px-4 py-2 text-sm text-gray-700"><input type="text" value="BNSP Dokter Hewan Praktis" class="text-gray-900 bg-gray-100 border px-3 py-2 rounded-lg"></td>
                    </tr>
                    <tr class="border-b">
                        <td class="px-4 py-2 text-sm text-gray-700">2</td>
                        <td class="px-4 py-2 text-sm text-gray-700"><input type="text" value="456/DH/456" class="text-gray-900 bg-gray-100 border px-3 py-2 rounded-lg"></td>
                        <td class="px-4 py-2 text-sm text-gray-700"><input type="text" value="Sertifikat PB PDHI" class="text-gray-900 bg-gray-100 border px-3 py-2 rounded-lg"></td>
                    </tr>
                    <tr class="border-b">
                        <td class="px-4 py-2 text-sm text-gray-700">3</td>
                        <td class="px-4 py-2 text-sm text-gray-700"><input type="text" value="789/DH/789" class="text-gray-900 bg-gray-100 border px-3 py-2 rounded-lg"></td>
                        <td class="px-4 py-2 text-sm text-gray-700"><input type="text" value="Sertifikat Organisasi Profesi" class="text-gray-900 bg-gray-100 border px-3 py-2 rounded-lg"></td>
                    </tr>
                </tbody>
            </table>
          </div>
    
          <!-- Jadwal Praktik -->
          <div class="mt-4">
            <h2 class="text-xl font-semibold text-gray-900 mb-4">Daftar Jadwal Praktik</h2>
            <table class="w-full table-auto border-collapse">
                <thead>
                    <tr class="text-left bg-gray-100">
                        <th class="px-4 py-2 border-b text-sm font-medium text-gray-700">No</th>
                        <th class="px-4 py-2 border-b text-sm font-medium text-gray-700">Hari</th>
                        <th class="px-4 py-2 border-b text-sm font-medium text-gray-700">Jam</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="border-b">
                        <td class="px-4 py-2 text-sm text-gray-700">1</td>
                        <td class="px-4 py-2 text-sm text-gray-700"><input type="text" value="Senin" class="text-gray-900 bg-gray-100 border px-3 py-2 rounded-lg"></td>
                        <td class="px-4 py-2 text-sm text-gray-700"><input type="text" value="13.00 - 15.00" class="text-gray-900 bg-gray-100 border px-3 py-2 rounded-lg"></td>
                    </tr>
                    <tr class="border-b">
                        <td class="px-4 py-2 text-sm text-gray-700">2</td>
                        <td class="px-4 py-2 text-sm text-gray-700"><input type="text" value="Rabu" class="text-gray-900 bg-gray-100 border px-3 py-2 rounded-lg"></td>
                        <td class="px-4 py-2 text-sm text-gray-700"><input type="text" value="13.00 - 15.00" class="text-gray-900 bg-gray-100 border px-3 py-2 rounded-lg"></td>
                    </tr>
                    <tr class="border-b">
                        <td class="px-4 py-2 text-sm text-gray-700">3</td>
                        <td class="px-4 py-2 text-sm text-gray-700"><input type="text" value="Jumat" class="text-gray-900 bg-gray-100 border px-3 py-2 rounded-lg"></td>
                        <td class="px-4 py-2 text-sm text-gray-700"><input type="text" value="14.00 - 16.00" class="text-gray-900 bg-gray-100 border px-3 py-2 rounded-lg"></td>
                    </tr>
                </tbody>
            </table>
          </div>
    
          <div class="mt-6">
            <button type="submit" class="bg-teal-800 text-white px-4 py-2 rounded-lg text-sm font-medium">Simpan Perubahan</button>
          </div>
        </form>
      </div>
    
      <script>
        function toggleEditMode() {
          const viewMode = document.getElementById('view-mode');
          const editMode = document.getElementById('edit-mode');
          viewMode.classList.toggle('hidden');
          editMode.classList.toggle('hidden');
        }
    
        function saveChanges() {
          // Logic for saving changes here
          alert("Perubahan berhasil disimpan!");
          toggleEditMode(); // Switch back to view mode
        }
      </script>
    </div>
  </main>
</div>
{% endblock content %}
